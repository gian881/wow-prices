import type { Item } from '@/types'

export const customSellColorScale: [number, string][] = [
  [0.0, '#a50026'],
  [0.00392156862745098, '#a70226'],
  [0.00784313725490196, '#a90426'],
  [0.011764705882352941, '#ab0626'],
  [0.01568627450980392, '#ad0826'],
  [0.0196078431372549, '#af0926'],
  [0.023529411764705882, '#b10b26'],
  [0.027450980392156862, '#b30d26'],
  [0.03137254901960784, '#b50f26'],
  [0.03529411764705882, '#b71126'],
  [0.0392156862745098, '#b91326'],
  [0.043137254901960784, '#bb1526'],
  [0.047058823529411764, '#bd1726'],
  [0.050980392156862744, '#be1827'],
  [0.054901960784313725, '#c01a27'],
  [0.058823529411764705, '#c21c27'],
  [0.06274509803921569, '#c41e27'],
  [0.06666666666666667, '#c62027'],
  [0.07058823529411765, '#c82227'],
  [0.07450980392156863, '#ca2427'],
  [0.0784313725490196, '#cc2627'],
  [0.08235294117647059, '#ce2827'],
  [0.08627450980392157, '#d02927'],
  [0.09019607843137255, '#d22b27'],
  [0.09411764705882353, '#d42d27'],
  [0.09803921568627451, '#d62f27'],
  [0.10196078431372549, '#d83128'],
  [0.10588235294117647, '#d93429'],
  [0.10980392156862745, '#da362a'],
  [0.11372549019607843, '#db382b'],
  [0.11764705882352941, '#dc3b2c'],
  [0.12156862745098039, '#dd3d2d'],
  [0.12549019607843137, '#de402e'],
  [0.12941176470588237, '#e0422f'],
  [0.13333333333333333, '#e14430'],
  [0.13725490196078433, '#e24731'],
  [0.1411764705882353, '#e34933'],
  [0.1450980392156863, '#e44c34'],
  [0.14901960784313725, '#e54e35'],
  [0.15294117647058825, '#e65036'],
  [0.1568627450980392, '#e75337'],
  [0.1607843137254902, '#e95538'],
  [0.16470588235294117, '#ea5739'],
  [0.16862745098039217, '#eb5a3a'],
  [0.17254901960784313, '#ec5c3b'],
  [0.17647058823529413, '#ed5f3c'],
  [0.1803921568627451, '#ee613e'],
  [0.1843137254901961, '#ef633f'],
  [0.18823529411764706, '#f16640'],
  [0.19215686274509805, '#f26841'],
  [0.19607843137254902, '#f36b42'],
  [0.2, '#f46d43'],
  [0.20392156862745098, '#f47044'],
  [0.20784313725490197, '#f57245'],
  [0.21176470588235294, '#f57547'],
  [0.21568627450980393, '#f57748'],
  [0.2196078431372549, '#f67a49'],
  [0.2235294117647059, '#f67c4a'],
  [0.22745098039215686, '#f67f4b'],
  [0.23137254901960785, '#f7814c'],
  [0.23529411764705882, '#f7844e'],
  [0.23921568627450981, '#f8864f'],
  [0.24313725490196078, '#f88950'],
  [0.24705882352941178, '#f88c51'],
  [0.25098039215686274, '#f98e52'],
  [0.2549019607843137, '#f99153'],
  [0.25882352941176473, '#f99355'],
  [0.2627450980392157, '#fa9656'],
  [0.26666666666666666, '#fa9857'],
  [0.27058823529411763, '#fa9b58'],
  [0.27450980392156865, '#fb9d59'],
  [0.2784313725490196, '#fba05b'],
  [0.2823529411764706, '#fba35c'],
  [0.28627450980392155, '#fca55d'],
  [0.2901960784313726, '#fca85e'],
  [0.29411764705882354, '#fcaa5f'],
  [0.2980392156862745, '#fdad60'],
  [0.30196078431372547, '#fdaf62'],
  [0.3058823529411765, '#fdb163'],
  [0.30980392156862746, '#fdb365'],
  [0.3137254901960784, '#fdb567'],
  [0.3176470588235294, '#fdb768'],
  [0.3215686274509804, '#fdb96a'],
  [0.3254901960784314, '#fdbb6c'],
  [0.32941176470588235, '#fdbd6d'],
  [0.3333333333333333, '#fdbf6f'],
  [0.33725490196078434, '#fdc171'],
  [0.3411764705882353, '#fdc372'],
  [0.34509803921568627, '#fdc574'],
  [0.34901960784313724, '#fdc776'],
  [0.35294117647058826, '#fec877'],
  [0.3568627450980392, '#feca79'],
  [0.3607843137254902, '#fecc7b'],
  [0.36470588235294116, '#fece7c'],
  [0.3686274509803922, '#fed07e'],
  [0.37254901960784315, '#fed27f'],
  [0.3764705882352941, '#fed481'],
  [0.3803921568627451, '#fed683'],
  [0.3843137254901961, '#fed884'],
  [0.38823529411764707, '#feda86'],
  [0.39215686274509803, '#fedc88'],
  [0.396078431372549, '#fede89'],
  [0.4, '#fee08b'],
  [0.403921568627451, '#fee18d'],
  [0.40784313725490196, '#fee28f'],
  [0.4117647058823529, '#fee491'],
  [0.41568627450980394, '#fee593'],
  [0.4196078431372549, '#fee695'],
  [0.4235294117647059, '#fee797'],
  [0.42745098039215684, '#fee999'],
  [0.43137254901960786, '#feea9b'],
  [0.43529411764705883, '#feeb9d'],
  [0.4392156862745098, '#feec9f'],
  [0.44313725490196076, '#feeda1'],
  [0.4470588235294118, '#feefa3'],
  [0.45098039215686275, '#fff0a6'],
  [0.4549019607843137, '#fff1a8'],
  [0.4588235294117647, '#fff2aa'],
  [0.4627450980392157, '#fff3ac'],
  [0.4666666666666667, '#fff5ae'],
  [0.47058823529411764, '#fff6b0'],
  [0.4745098039215686, '#fff7b2'],
  [0.47843137254901963, '#fff8b4'],
  [0.4823529411764706, '#fffab6'],
  [0.48627450980392156, '#fffbb8'],
  [0.49019607843137253, '#fffcba'],
  [0.49411764705882355, '#fffdbc'],
  [0.4980392156862745, '#fffebe'],
  [0.5019607843137255, '#feffbe'],
  [0.5058823529411764, '#fdfebc'],
  [0.5098039215686274, '#fbfdba'],
  [0.5137254901960784, '#fafdb8'],
  [0.5176470588235295, '#f8fcb6'],
  [0.5215686274509804, '#f7fcb4'],
  [0.5254901960784314, '#f5fbb2'],
  [0.5294117647058824, '#f4fab0'],
  [0.5333333333333333, '#f2faae'],
  [0.5372549019607843, '#f1f9ac'],
  [0.5411764705882353, '#eff8aa'],
  [0.5450980392156862, '#eef8a8'],
  [0.5490196078431373, '#ecf7a6'],
  [0.5529411764705883, '#ebf7a3'],
  [0.5568627450980392, '#e9f6a1'],
  [0.5607843137254902, '#e8f59f'],
  [0.5647058823529412, '#e6f59d'],
  [0.5686274509803921, '#e5f49b'],
  [0.5725490196078431, '#e3f399'],
  [0.5764705882352941, '#e2f397'],
  [0.5803921568627451, '#e0f295'],
  [0.5843137254901961, '#dff293'],
  [0.5882352941176471, '#ddf191'],
  [0.592156862745098, '#dcf08f'],
  [0.596078431372549, '#daf08d'],
  [0.6, '#d9ef8b'],
  [0.6039215686274509, '#d7ee8a'],
  [0.6078431372549019, '#d5ed88'],
  [0.611764705882353, '#d3ec87'],
  [0.615686274509804, '#d1ec86'],
  [0.6196078431372549, '#cfeb85'],
  [0.6235294117647059, '#cdea83'],
  [0.6274509803921569, '#cbe982'],
  [0.6313725490196078, '#c9e881'],
  [0.6352941176470588, '#c7e77f'],
  [0.6392156862745098, '#c5e67e'],
  [0.6431372549019608, '#c3e67d'],
  [0.6470588235294118, '#c1e57b'],
  [0.6509803921568628, '#bfe47a'],
  [0.6549019607843137, '#bde379'],
  [0.6588235294117647, '#bbe278'],
  [0.6627450980392157, '#b9e176'],
  [0.6666666666666666, '#b7e075'],
  [0.6705882352941176, '#b5df74'],
  [0.6745098039215687, '#b3df72'],
  [0.6784313725490196, '#b1de71'],
  [0.6823529411764706, '#afdd70'],
  [0.6862745098039216, '#addc6f'],
  [0.6901960784313725, '#abdb6d'],
  [0.6941176470588235, '#a9da6c'],
  [0.6980392156862745, '#a7d96b'],
  [0.7019607843137254, '#a5d86a'],
  [0.7058823529411765, '#a2d76a'],
  [0.7098039215686275, '#a0d669'],
  [0.7137254901960784, '#9dd569'],
  [0.7176470588235294, '#9bd469'],
  [0.7215686274509804, '#98d368'],
  [0.7254901960784313, '#96d268'],
  [0.7294117647058823, '#93d168'],
  [0.7333333333333333, '#91d068'],
  [0.7372549019607844, '#8ecf67'],
  [0.7411764705882353, '#8ccd67'],
  [0.7450980392156863, '#89cc67'],
  [0.7490196078431373, '#87cb67'],
  [0.7529411764705882, '#84ca66'],
  [0.7568627450980392, '#82c966'],
  [0.7607843137254902, '#7fc866'],
  [0.7647058823529411, '#7dc765'],
  [0.7686274509803922, '#7ac665'],
  [0.7725490196078432, '#78c565'],
  [0.7764705882352941, '#75c465'],
  [0.7803921568627451, '#73c264'],
  [0.7843137254901961, '#70c164'],
  [0.788235294117647, '#6ec064'],
  [0.792156862745098, '#6bbf64'],
  [0.796078431372549, '#69be63'],
  [0.8, '#66bd63'],
  [0.803921568627451, '#63bc62'],
  [0.807843137254902, '#60ba62'],
  [0.8117647058823529, '#5db961'],
  [0.8156862745098039, '#5ab760'],
  [0.8196078431372549, '#57b65f'],
  [0.8235294117647058, '#54b45f'],
  [0.8274509803921568, '#51b35e'],
  [0.8313725490196079, '#4eb15d'],
  [0.8352941176470589, '#4bb05c'],
  [0.8392156862745098, '#48ae5c'],
  [0.8431372549019608, '#45ad5b'],
  [0.8470588235294118, '#42ac5a'],
  [0.8509803921568627, '#3faa59'],
  [0.8549019607843137, '#3ca959'],
  [0.8588235294117647, '#39a758'],
  [0.8627450980392157, '#36a657'],
  [0.8666666666666667, '#33a456'],
  [0.8705882352941177, '#30a356'],
  [0.8745098039215686, '#2da155'],
  [0.8784313725490196, '#2aa054'],
  [0.8823529411764706, '#279f53'],
  [0.8862745098039215, '#249d53'],
  [0.8901960784313725, '#219c52'],
  [0.8941176470588236, '#1e9a51'],
  [0.8980392156862745, '#1b9950'],
  [0.9019607843137255, '#199750'],
  [0.9058823529411765, '#18954f'],
  [0.9098039215686274, '#17934e'],
  [0.9137254901960784, '#16914d'],
  [0.9176470588235294, '#15904c'],
  [0.9215686274509803, '#148e4b'],
  [0.9254901960784314, '#138c4a'],
  [0.9294117647058824, '#128a49'],
  [0.9333333333333333, '#118848'],
  [0.9372549019607843, '#108647'],
  [0.9411764705882353, '#0f8446'],
  [0.9450980392156862, '#0e8245'],
  [0.9490196078431372, '#0d8044'],
  [0.9529411764705882, '#0c7f43'],
  [0.9568627450980393, '#0b7d42'],
  [0.9607843137254902, '#0a7b41'],
  [0.9647058823529412, '#097940'],
  [0.9686274509803922, '#08773f'],
  [0.9725490196078431, '#07753e'],
  [0.9764705882352941, '#06733d'],
  [0.9803921568627451, '#05713c'],
  [0.984313725490196, '#04703b'],
  [0.9882352941176471, '#036e3a'],
  [0.9921568627450981, '#026c39'],
  [0.996078431372549, '#016a38'],
  [1.0, '#006837'],
]

export const customBuyColorScale: [number, string][] = [
  [0.0, '#006837'],
  [0.00392156862745098, '#016a38'],
  [0.00784313725490196, '#026c39'],
  [0.011764705882352941, '#036e3a'],
  [0.01568627450980392, '#04703b'],
  [0.0196078431372549, '#05713c'],
  [0.023529411764705882, '#06733d'],
  [0.027450980392156862, '#07753e'],
  [0.03137254901960784, '#08773f'],
  [0.03529411764705882, '#097940'],
  [0.0392156862745098, '#0a7b41'],
  [0.043137254901960784, '#0b7d42'],
  [0.047058823529411764, '#0c7f43'],
  [0.050980392156862744, '#0d8044'],
  [0.054901960784313725, '#0e8245'],
  [0.058823529411764705, '#0f8446'],
  [0.06274509803921569, '#108647'],
  [0.06666666666666667, '#118848'],
  [0.07058823529411765, '#128a49'],
  [0.07450980392156863, '#138c4a'],
  [0.0784313725490196, '#148e4b'],
  [0.08235294117647059, '#15904c'],
  [0.08627450980392157, '#16914d'],
  [0.09019607843137255, '#17934e'],
  [0.09411764705882353, '#18954f'],
  [0.09803921568627451, '#199750'],
  [0.10196078431372549, '#1b9950'],
  [0.10588235294117647, '#1e9a51'],
  [0.10980392156862745, '#219c52'],
  [0.11372549019607843, '#249d53'],
  [0.11764705882352941, '#279f53'],
  [0.12156862745098039, '#2aa054'],
  [0.12549019607843137, '#2da155'],
  [0.12941176470588237, '#30a356'],
  [0.13333333333333333, '#33a456'],
  [0.13725490196078433, '#36a657'],
  [0.1411764705882353, '#39a758'],
  [0.1450980392156863, '#3ca959'],
  [0.14901960784313725, '#3faa59'],
  [0.15294117647058825, '#42ac5a'],
  [0.1568627450980392, '#45ad5b'],
  [0.1607843137254902, '#48ae5c'],
  [0.16470588235294117, '#4bb05c'],
  [0.16862745098039217, '#4eb15d'],
  [0.17254901960784313, '#51b35e'],
  [0.17647058823529413, '#54b45f'],
  [0.1803921568627451, '#57b65f'],
  [0.1843137254901961, '#5ab760'],
  [0.18823529411764706, '#5db961'],
  [0.19215686274509805, '#60ba62'],
  [0.19607843137254902, '#63bc62'],
  [0.2, '#66bd63'],
  [0.20392156862745098, '#69be63'],
  [0.20784313725490197, '#6bbf64'],
  [0.21176470588235294, '#6ec064'],
  [0.21568627450980393, '#70c164'],
  [0.2196078431372549, '#73c264'],
  [0.2235294117647059, '#75c465'],
  [0.22745098039215686, '#78c565'],
  [0.23137254901960785, '#7ac665'],
  [0.23529411764705882, '#7dc765'],
  [0.23921568627450981, '#7fc866'],
  [0.24313725490196078, '#82c966'],
  [0.24705882352941178, '#84ca66'],
  [0.25098039215686274, '#87cb67'],
  [0.2549019607843137, '#89cc67'],
  [0.25882352941176473, '#8ccd67'],
  [0.2627450980392157, '#8ecf67'],
  [0.26666666666666666, '#91d068'],
  [0.27058823529411763, '#93d168'],
  [0.27450980392156865, '#96d268'],
  [0.2784313725490196, '#98d368'],
  [0.2823529411764706, '#9bd469'],
  [0.28627450980392155, '#9dd569'],
  [0.2901960784313726, '#a0d669'],
  [0.29411764705882354, '#a2d76a'],
  [0.2980392156862745, '#a5d86a'],
  [0.30196078431372547, '#a7d96b'],
  [0.3058823529411765, '#a9da6c'],
  [0.30980392156862746, '#abdb6d'],
  [0.3137254901960784, '#addc6f'],
  [0.3176470588235294, '#afdd70'],
  [0.3215686274509804, '#b1de71'],
  [0.3254901960784314, '#b3df72'],
  [0.32941176470588235, '#b5df74'],
  [0.3333333333333333, '#b7e075'],
  [0.33725490196078434, '#b9e176'],
  [0.3411764705882353, '#bbe278'],
  [0.34509803921568627, '#bde379'],
  [0.34901960784313724, '#bfe47a'],
  [0.35294117647058826, '#c1e57b'],
  [0.3568627450980392, '#c3e67d'],
  [0.3607843137254902, '#c5e67e'],
  [0.36470588235294116, '#c7e77f'],
  [0.3686274509803922, '#c9e881'],
  [0.37254901960784315, '#cbe982'],
  [0.3764705882352941, '#cdea83'],
  [0.3803921568627451, '#cfeb85'],
  [0.3843137254901961, '#d1ec86'],
  [0.38823529411764707, '#d3ec87'],
  [0.39215686274509803, '#d5ed88'],
  [0.396078431372549, '#d7ee8a'],
  [0.4, '#d9ef8b'],
  [0.403921568627451, '#daf08d'],
  [0.40784313725490196, '#dcf08f'],
  [0.4117647058823529, '#ddf191'],
  [0.41568627450980394, '#dff293'],
  [0.4196078431372549, '#e0f295'],
  [0.4235294117647059, '#e2f397'],
  [0.42745098039215684, '#e3f399'],
  [0.43137254901960786, '#e5f49b'],
  [0.43529411764705883, '#e6f59d'],
  [0.4392156862745098, '#e8f59f'],
  [0.44313725490196076, '#e9f6a1'],
  [0.4470588235294118, '#ebf7a3'],
  [0.45098039215686275, '#ecf7a6'],
  [0.4549019607843137, '#eef8a8'],
  [0.4588235294117647, '#eff8aa'],
  [0.4627450980392157, '#f1f9ac'],
  [0.4666666666666667, '#f2faae'],
  [0.47058823529411764, '#f4fab0'],
  [0.4745098039215686, '#f5fbb2'],
  [0.47843137254901963, '#f7fcb4'],
  [0.4823529411764706, '#f8fcb6'],
  [0.48627450980392156, '#fafdb8'],
  [0.49019607843137253, '#fbfdba'],
  [0.49411764705882355, '#fdfebc'],
  [0.4980392156862745, '#feffbe'],
  [0.5019607843137255, '#fffebe'],
  [0.5058823529411764, '#fffdbc'],
  [0.5098039215686274, '#fffcba'],
  [0.5137254901960784, '#fffbb8'],
  [0.5176470588235295, '#fffab6'],
  [0.5215686274509804, '#fff8b4'],
  [0.5254901960784314, '#fff7b2'],
  [0.5294117647058824, '#fff6b0'],
  [0.5333333333333333, '#fff5ae'],
  [0.5372549019607843, '#fff3ac'],
  [0.5411764705882353, '#fff2aa'],
  [0.5450980392156862, '#fff1a8'],
  [0.5490196078431373, '#fff0a6'],
  [0.5529411764705883, '#feefa3'],
  [0.5568627450980392, '#feeda1'],
  [0.5607843137254902, '#feec9f'],
  [0.5647058823529412, '#feeb9d'],
  [0.5686274509803921, '#feea9b'],
  [0.5725490196078431, '#fee999'],
  [0.5764705882352941, '#fee797'],
  [0.5803921568627451, '#fee695'],
  [0.5843137254901961, '#fee593'],
  [0.5882352941176471, '#fee491'],
  [0.592156862745098, '#fee28f'],
  [0.596078431372549, '#fee18d'],
  [0.6, '#fee08b'],
  [0.6039215686274509, '#fede89'],
  [0.6078431372549019, '#fedc88'],
  [0.611764705882353, '#feda86'],
  [0.615686274509804, '#fed884'],
  [0.6196078431372549, '#fed683'],
  [0.6235294117647059, '#fed481'],
  [0.6274509803921569, '#fed27f'],
  [0.6313725490196078, '#fed07e'],
  [0.6352941176470588, '#fece7c'],
  [0.6392156862745098, '#fecc7b'],
  [0.6431372549019608, '#feca79'],
  [0.6470588235294118, '#fec877'],
  [0.6509803921568628, '#fdc776'],
  [0.6549019607843137, '#fdc574'],
  [0.6588235294117647, '#fdc372'],
  [0.6627450980392157, '#fdc171'],
  [0.6666666666666666, '#fdbf6f'],
  [0.6705882352941176, '#fdbd6d'],
  [0.6745098039215687, '#fdbb6c'],
  [0.6784313725490196, '#fdb96a'],
  [0.6823529411764706, '#fdb768'],
  [0.6862745098039216, '#fdb567'],
  [0.6901960784313725, '#fdb365'],
  [0.6941176470588235, '#fdb163'],
  [0.6980392156862745, '#fdaf62'],
  [0.7019607843137254, '#fdad60'],
  [0.7058823529411765, '#fcaa5f'],
  [0.7098039215686275, '#fca85e'],
  [0.7137254901960784, '#fca55d'],
  [0.7176470588235294, '#fba35c'],
  [0.7215686274509804, '#fba05b'],
  [0.7254901960784313, '#fb9d59'],
  [0.7294117647058823, '#fa9b58'],
  [0.7333333333333333, '#fa9857'],
  [0.7372549019607844, '#fa9656'],
  [0.7411764705882353, '#f99355'],
  [0.7450980392156863, '#f99153'],
  [0.7490196078431373, '#f98e52'],
  [0.7529411764705882, '#f88c51'],
  [0.7568627450980392, '#f88950'],
  [0.7607843137254902, '#f8864f'],
  [0.7647058823529411, '#f7844e'],
  [0.7686274509803922, '#f7814c'],
  [0.7725490196078432, '#f67f4b'],
  [0.7764705882352941, '#f67c4a'],
  [0.7803921568627451, '#f67a49'],
  [0.7843137254901961, '#f57748'],
  [0.788235294117647, '#f57547'],
  [0.792156862745098, '#f57245'],
  [0.796078431372549, '#f47044'],
  [0.8, '#f46d43'],
  [0.803921568627451, '#f36b42'],
  [0.807843137254902, '#f26841'],
  [0.8117647058823529, '#f16640'],
  [0.8156862745098039, '#ef633f'],
  [0.8196078431372549, '#ee613e'],
  [0.8235294117647058, '#ed5f3c'],
  [0.8274509803921568, '#ec5c3b'],
  [0.8313725490196079, '#eb5a3a'],
  [0.8352941176470589, '#ea5739'],
  [0.8392156862745098, '#e95538'],
  [0.8431372549019608, '#e75337'],
  [0.8470588235294118, '#e65036'],
  [0.8509803921568627, '#e54e35'],
  [0.8549019607843137, '#e44c34'],
  [0.8588235294117647, '#e34933'],
  [0.8627450980392157, '#e24731'],
  [0.8666666666666667, '#e14430'],
  [0.8705882352941177, '#e0422f'],
  [0.8745098039215686, '#de402e'],
  [0.8784313725490196, '#dd3d2d'],
  [0.8823529411764706, '#dc3b2c'],
  [0.8862745098039215, '#db382b'],
  [0.8901960784313725, '#da362a'],
  [0.8941176470588236, '#d93429'],
  [0.8980392156862745, '#d83128'],
  [0.9019607843137255, '#d62f27'],
  [0.9058823529411765, '#d42d27'],
  [0.9098039215686274, '#d22b27'],
  [0.9137254901960784, '#d02927'],
  [0.9176470588235294, '#ce2827'],
  [0.9215686274509803, '#cc2627'],
  [0.9254901960784314, '#ca2427'],
  [0.9294117647058824, '#c82227'],
  [0.9333333333333333, '#c62027'],
  [0.9372549019607843, '#c41e27'],
  [0.9411764705882353, '#c21c27'],
  [0.9450980392156862, '#c01a27'],
  [0.9490196078431372, '#be1827'],
  [0.9529411764705882, '#bd1726'],
  [0.9568627450980393, '#bb1526'],
  [0.9607843137254902, '#b91326'],
  [0.9647058823529412, '#b71126'],
  [0.9686274509803922, '#b50f26'],
  [0.9725490196078431, '#b30d26'],
  [0.9764705882352941, '#b10b26'],
  [0.9803921568627451, '#af0926'],
  [0.984313725490196, '#ad0826'],
  [0.9882352941176471, '#ab0626'],
  [0.9921568627450981, '#a90426'],
  [0.996078431372549, '#a70226'],
  [1.0, '#a50026'],
]

export function getRelativeTime(dateString: string): string {
  const rtf = new Intl.RelativeTimeFormat('pt-BR', { numeric: 'auto' })

  const now = new Date()
  const past = new Date(dateString)
  const diffMs = past.getTime() - now.getTime()
  const diffSec = Math.round(diffMs / 1000)
  const diffMin = Math.round(diffSec / 60)
  const diffHours = Math.round(diffMin / 60)
  const diffDays = Math.round(diffHours / 24)

  if (Math.abs(diffSec) < 60) {
    return rtf.format(diffSec, 'second')
  } else if (Math.abs(diffMin) < 60) {
    return rtf.format(diffMin, 'minute')
  } else if (Math.abs(diffHours) < 24) {
    return rtf.format(diffHours, 'hour')
  } else {
    return rtf.format(diffDays, 'day')
  }
}

export function getTodayWeekdayIndex(): number {
  const weekdays = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday']
  const currentWeekday = new Date()
    .toLocaleDateString('en-US', { timeZone: 'America/Sao_Paulo', weekday: 'long' })
    .toLowerCase()
  return weekdays.indexOf(currentWeekday)
}

export function isNotificationOn(item: Item): boolean {
  if (item.intent === 'buy') {
    return item.notify_buy
  } else if (item.intent === 'sell') {
    return item.notify_sell
  } else if (item.intent === 'both') {
    return item.notify_buy || item.notify_sell
  }
  return false
}

export async function toggleNotification(item: Item) {
  const payload: { notify_buy?: boolean; notify_sell?: boolean } = {}

  switch (item.intent) {
    case 'buy':
      payload.notify_buy = !item.notify_buy
      break
    case 'sell':
      payload.notify_sell = !item.notify_sell
      break
    case 'both':
      payload.notify_buy = !item.notify_buy
      payload.notify_sell = !item.notify_sell
      break
    default:
      console.error(`Ação para o 'intent' "${item.intent}" não é conhecida.`)
      return
  }

  try {
    const response = await fetch(`${import.meta.env.VITE_BACKEND_BASE_URL}/items/${item.id}`, {
      method: 'PUT',
      body: JSON.stringify(payload),
      headers: {
        'Content-Type': 'application/json',
      },
    })

    if (!response.ok) {
      throw new Error(`Erro ao atualizar notificação: ${response.statusText}`)
    }

    Object.assign(item, payload)
  } catch (error) {
    console.error('Erro ao atualizar notificação:', error)
  }
}
